name: Limpieza de gu√≠as antiguas

on:
  schedule:
    - cron: '0 3 * * *'  # cada d√≠a a las 03:00 UTC

jobs:
  cleanup:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout del repositorio
        uses: actions/checkout@v3

      - name: Eliminar gu√≠as con m√°s de 7 d√≠as
        run: |
          DIR="GUIAS-CUNDINAMARCA"
          MAX_DAYS=7
          find "$DIR" -type f -mtime +"$MAX_DAYS" -print -exec git rm {} \;

      - name: Commit y push de los cambios
        run: |
          if git diff --quiet; then
            echo "Nada que borrar"
            exit 0
          fi
          git config user.name "github-actions[bot]"
          git config user.email "actions@github.com"
          git commit -m "üßπ Eliminar gu√≠as con m√°s de $MAX_DAYS d√≠as"
          git push
